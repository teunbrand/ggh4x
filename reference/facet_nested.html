<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="facet_nested() forms a matrix of panels defined by row
  and column faceting variables and nests grouped facets."><title>Layout panels in a grid with nested strips — facet_nested • ggh4x</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Layout panels in a grid with nested strips — facet_nested"><meta property="og:description" content="facet_nested() forms a matrix of panels defined by row
  and column faceting variables and nests grouped facets."><meta property="og:image" content="https://teunbrand.github.io/ggh4x/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ggh4x</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/ggh4x.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Facets.html">Facets</a>
    <a class="dropdown-item" href="../articles/Miscellaneous.html">Miscellaneous</a>
    <a class="dropdown-item" href="../articles/PositionGuides.html">Position Guides</a>
    <a class="dropdown-item" href="../articles/Statistics.html">Statistics</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/teunbrand/ggh4x/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Layout panels in a grid with nested strips</h1>
      <small class="dont-index">Source: <a href="https://github.com/teunbrand/ggh4x/blob/HEAD/R/facet_nested.R" class="external-link"><code>R/facet_nested.R</code></a></small>
      <div class="d-none name"><code>facet_nested.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>facet_nested()</code> forms a matrix of panels defined by row
  and column faceting variables and nests grouped facets.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">facet_nested</span><span class="op">(</span>
  rows <span class="op">=</span> <span class="cn">NULL</span>,
  cols <span class="op">=</span> <span class="cn">NULL</span>,
  scales <span class="op">=</span> <span class="st">"fixed"</span>,
  space <span class="op">=</span> <span class="st">"fixed"</span>,
  axes <span class="op">=</span> <span class="st">"margins"</span>,
  remove_labels <span class="op">=</span> <span class="st">"none"</span>,
  independent <span class="op">=</span> <span class="st">"none"</span>,
  shrink <span class="op">=</span> <span class="cn">TRUE</span>,
  labeller <span class="op">=</span> <span class="st">"label_value"</span>,
  as.table <span class="op">=</span> <span class="cn">TRUE</span>,
  switch <span class="op">=</span> <span class="cn">NULL</span>,
  drop <span class="op">=</span> <span class="cn">TRUE</span>,
  margins <span class="op">=</span> <span class="cn">FALSE</span>,
  nest_line <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
  resect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>, <span class="st">"mm"</span><span class="op">)</span>,
  strip <span class="op">=</span> <span class="fu"><a href="strip_nested.html">strip_nested</a></span><span class="op">(</span><span class="op">)</span>,
  bleed <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>rows</dt>
<dd><p>A set of variables or expressions quoted by
<code><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code> and defining faceting groups on the rows or columns
dimension. The variables can be named (the names are passed to
<code>labeller</code>).</p>
<p>For compatibility with the classic interface, <code>rows</code> can also be
a formula with the rows (of the tabular display) on the LHS and
the columns (of the tabular display) on the RHS; the dot in the
formula is used to indicate there should be no faceting on this
dimension (either row or column).</p></dd>
<dt>cols</dt>
<dd><p>A set of variables or expressions quoted by
<code><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code> and defining faceting groups on the rows or columns
dimension. The variables can be named (the names are passed to
<code>labeller</code>).</p>
<p>For compatibility with the classic interface, <code>rows</code> can also be
a formula with the rows (of the tabular display) on the LHS and
the columns (of the tabular display) on the RHS; the dot in the
formula is used to indicate there should be no faceting on this
dimension (either row or column).</p></dd>
<dt>scales</dt>
<dd><p>A <code>character(1)</code> or <code>logical(1)</code> whether scales are shared
across facets or allowed to vary. Interacts with the <code>independent</code>
argument. One of the following:</p><dl><dt><code>"fixed"</code> or <code>FALSE</code></dt>
<dd><p>Scales are shared across all facets
(default).</p></dd>

<dt><code>"free_x"</code></dt>
<dd><p>x-scales are allowed to vary across rows.</p></dd>

<dt><code>"free_y"</code></dt>
<dd><p>y-scales are allowed to vary across columns.</p></dd>

<dt><code>"free"</code> or <code>TRUE</code></dt>
<dd><p>Scales can vary across rows and columns.</p></dd>


</dl></dd>
<dt>space</dt>
<dd><p>A <code>character(1)</code> or <code>logical(1)</code> determining whether the size of
panels are proportional to the length of the scales. When the <code>independent</code>
argument allows for free scales in a dimension, the panel sizes cannot be
proportional. Note that the <code>scales</code> argument must be free in the same
dimension as the <code>space</code> argument to have an effect.One of the following:</p><dl><dt><code>"fixed"</code> or <code>FALSE</code></dt>
<dd><p>All panels have the same size (default).</p></dd>

<dt><code>"free_x"</code></dt>
<dd><p>Panel widths are proportional to the x-scales.</p></dd>

<dt><code>"free_y"</code></dt>
<dd><p>Panel heights are proportional to the y-scales.</p></dd>

<dt><code>"free"</code> or <code>TRUE</code></dt>
<dd><p>Both the widths and heights vary according to
scales.</p></dd>


</dl></dd>
<dt>axes</dt>
<dd><p>A <code>character(1)</code> or <code>logical(1)</code> where axes should be drawn. One
of the following:</p><dl><dt><code>"margins"</code> or <code>FALSE</code></dt>
<dd><p>Only draw axes at the outer margins
(default).</p></dd>

<dt><code>"x"</code></dt>
<dd><p>Draw axes at the outer margins and all inner x-axes too.</p></dd>

<dt><code>"y"</code></dt>
<dd><p>Draw axes at the outer margins and all inner y-axes too.</p></dd>

<dt><code>"all"</code> or <code>TRUE</code></dt>
<dd><p>Draw the axes for every panel.</p></dd>


</dl></dd>
<dt>remove_labels</dt>
<dd><p>A <code>character(1)</code> or <code>logical(1)</code> determining whether
axis text is displayed at inner panels. One of the following:</p><dl><dt><code>"none"</code> or <code>FALSE</code></dt>
<dd><p>Display axis text at all axes (default).</p></dd>

<dt><code>"x"</code></dt>
<dd><p>Display axis text at outer margins and all inner y-axes.</p></dd>

<dt><code>"y"</code></dt>
<dd><p>Display axis text at outer margins and all inner x-axes.</p></dd>

<dt><code>"all"</code> or <code>TRUE</code></dt>
<dd><p>Only display axis text at the outer margins.</p></dd>


</dl></dd>
<dt>independent</dt>
<dd><p>A <code>character(1)</code> or <code>logical(1)</code> determining whether
scales can vary within a row or column of panels, like they can be in
<a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">ggplot2::facet_wrap</a>. The <code>scales</code> argument must be free for the same
dimension before they can be set to independent. One of the following:</p><dl><dt><code>"none"</code> or <code>FALSE</code></dt>
<dd><p>All y-scales should be fixed in a row and all
x-scales are fixed in a column (default).</p></dd>

<dt><code>"x"</code></dt>
<dd><p>x-scales are allowed to vary within a column.</p></dd>

<dt><code>"y"</code></dt>
<dd><p>y-scales are allowed to vary within a row.</p></dd>

<dt><code>"all"</code> or <code>TRUE</code></dt>
<dd><p>Both x- and y-scales are allowed to vary within
a column or row respectively.</p></dd>


</dl></dd>
<dt>shrink</dt>
<dd><p>If <code>TRUE</code>, will shrink scales to fit output of
statistics, not raw data. If <code>FALSE</code>, will be range of raw data
before statistical summary.</p></dd>
<dt>labeller</dt>
<dd><p>A function that takes one data frame of labels and
returns a list or data frame of character vectors. Each input
column corresponds to one factor. Thus there will be more than
one with <code>vars(cyl, am)</code>. Each output
column gets displayed as one separate line in the strip
label. This function should inherit from the "labeller" S3 class
for compatibility with <code><a href="https://ggplot2.tidyverse.org/reference/labeller.html" class="external-link">labeller()</a></code>. You can use different labeling
functions for different kind of labels, for example use <code><a href="https://ggplot2.tidyverse.org/reference/labellers.html" class="external-link">label_parsed()</a></code> for
formatting facet labels. <code><a href="https://ggplot2.tidyverse.org/reference/labellers.html" class="external-link">label_value()</a></code> is used by default,
check it for more details and pointers to other options.</p></dd>
<dt>as.table</dt>
<dd><p>If <code>TRUE</code>, the default, the facets are laid out like
a table with highest values at the bottom-right. If <code>FALSE</code>, the
facets are laid out like a plot with the highest value at the top-right.</p></dd>
<dt>switch</dt>
<dd><p>By default, the labels are displayed on the top and
right of the plot. If <code>"x"</code>, the top labels will be
displayed to the bottom. If <code>"y"</code>, the right-hand side
labels will be displayed to the left. Can also be set to
<code>"both"</code>.</p></dd>
<dt>drop</dt>
<dd><p>If <code>TRUE</code>, the default, all factor levels not used in the
data will automatically be dropped. If <code>FALSE</code>, all factor levels
will be shown, regardless of whether or not they appear in the data.</p></dd>
<dt>margins</dt>
<dd><p>Either a logical value or a character
vector. Margins are additional facets which contain all the data
for each of the possible values of the faceting variables. If
<code>FALSE</code>, no additional facets are included (the
default). If <code>TRUE</code>, margins are included for all faceting
variables. If specified as a character vector, it is the names of
variables for which margins are to be created.</p></dd>
<dt>nest_line</dt>
<dd><p>a theme element, either <code><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank()</a></code> or inheriting
from <code><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a>()</code>. This element inherits from
the <code>ggh4x.facet.nestline</code> element in the theme.</p></dd>
<dt>resect</dt>
<dd><p>a <code>unit</code> vector of length 1, indicating how much the
nesting line should be shortened.</p></dd>
<dt>strip</dt>
<dd><p>An object created by a call to a strip function, such as
<code><a href="strip_nested.html">strip_nested</a>()</code>.</p></dd>
<dt>bleed</dt>
<dd><p>Deprecated. Use `strip = strip_nested(bleed = ...)` instead.
See details.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <em>FacetNested</em> ggproto object that can be added to a plot.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function inherits the capabilities of
  <code><a href="facet_grid2.html">facet_grid2</a>()</code>.</p>
<p>Unlike <code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid()</a></code>, this function only automatically expands
  missing variables when they have no variables in that direction, to allow
  for unnested variables. It still requires at least one layer to have all
  faceting variables.</p>
<p>Hierarchies are inferred from the order of variables supplied to
  <code>rows</code> or <code>cols</code>. The first variable is interpreted to be the
  outermost variable, while the last variable is interpreted to be the
  innermost variable. They display order is always such that the outermost
  variable is placed the furthest away from the panels. For more information
  about the nesting of strips, please visit the documentation of
  <code><a href="strip_nested.html">strip_nested</a>()</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>See <code><a href="strip_nested.html">strip_nested</a></code> for nested strips. See
  <code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></code> for descriptions of the original
  arguments. See <code><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></code> for the construction of a
  <code>unit</code> vector.</p>
<p>Other facetting functions: 
<code><a href="facet_grid2.html">facet_grid2</a>()</code>,
<code><a href="facet_manual.html">facet_manual</a>()</code>,
<code><a href="facet_nested_wrap.html">facet_nested_wrap</a>()</code>,
<code><a href="facet_wrap2.html">facet_wrap2</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># A standard plot</span></span>
<span class="r-in"><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">wt</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in">  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Similar to `facet_grid2(..., strip = strip_nested())`</span></span>
<span class="r-in"><span class="va">p</span> <span class="op">+</span> <span class="fu">facet_nested</span><span class="op">(</span><span class="op">~</span> <span class="va">vs</span> <span class="op">+</span> <span class="va">cyl</span><span class="op">)</span></span>
<span class="r-plt img"><img src="facet_nested-1.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># The nest line inherits from the global theme</span></span>
<span class="r-in"><span class="va">p</span> <span class="op">+</span> <span class="fu">facet_nested</span><span class="op">(</span><span class="op">~</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">vs</span>, nest_line <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in">  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>ggh4x.facet.nestline <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span>linetype <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-plt img"><img src="facet_nested-2.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Teun van den Brand.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

